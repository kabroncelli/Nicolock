webpackJsonp([0],{

/***/ 176:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var EnvelopeIcon = function EnvelopeIcon(props) {
  return _react2.default.createElement(
    'svg',
    { className: 'icon neutral-0', 'data-name': 'Layer 1', xmlns: 'http://www.w3.org/2000/svg', viewBox: '0 0 17.46 13.97' },
    _react2.default.createElement('path', { className: 'path', d: 'M17.45,2.09a.73.73,0,0,1-.28.65c-.32.43-7.86,5.67-7.86,5.67A1.1,1.1,0,0,1,8,8.4L.22,2.67A1.44,1.44,0,0,1,0,1.9v.34A2.24,2.24,0,0,1,2.24,0h13A2.14,2.14,0,0,1,17.45,2.09Z' }),
    _react2.default.createElement('path', { className: 'path', d: 'M9.41,9.95,17,4.5a.3.3,0,0,1,.47.24v7A2.23,2.23,0,0,1,15.23,14h-13A2.25,2.25,0,0,1,0,11.72v-7a.3.3,0,0,1,.48-.24L7.94,9.94A1.26,1.26,0,0,0,9.41,9.95Z' })
  );
};

exports.default = EnvelopeIcon;

/***/ }),

/***/ 177:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ReceiverIcon = function ReceiverIcon(props) {
  return _react2.default.createElement(
    'svg',
    { className: 'icon icon-receiver', xmlns: 'http://www.w3.org/2000/svg', x: '0px', y: '0px', viewBox: '0 0 578.106 578.106' },
    _react2.default.createElement('path', { className: 'path', d: 'M577.83,456.128c1.225,9.385-1.635,17.545-8.568,24.48l-81.396,80.781    c-3.672,4.08-8.465,7.551-14.381,10.404c-5.916,2.857-11.729,4.693-17.439,5.508c-0.408,0-1.635,0.105-3.676,0.309    c-2.037,0.203-4.689,0.307-7.953,0.307c-7.754,0-20.301-1.326-37.641-3.979s-38.555-9.182-63.645-19.584    c-25.096-10.404-53.553-26.012-85.376-46.818c-31.823-20.805-65.688-49.367-101.592-85.68    c-28.56-28.152-52.224-55.08-70.992-80.783c-18.768-25.705-33.864-49.471-45.288-71.299    c-11.425-21.828-19.993-41.616-25.705-59.364S4.59,177.362,2.55,164.51s-2.856-22.95-2.448-30.294    c0.408-7.344,0.612-11.424,0.612-12.24c0.816-5.712,2.652-11.526,5.508-17.442s6.324-10.71,10.404-14.382L98.022,8.756    c5.712-5.712,12.24-8.568,19.584-8.568c5.304,0,9.996,1.53,14.076,4.59s7.548,6.834,10.404,11.322l65.484,124.236    c3.672,6.528,4.692,13.668,3.06,21.42c-1.632,7.752-5.1,14.28-10.404,19.584l-29.988,29.988c-0.816,0.816-1.53,2.142-2.142,3.978    s-0.918,3.366-0.918,4.59c1.632,8.568,5.304,18.36,11.016,29.376c4.896,9.792,12.444,21.726,22.644,35.802    s24.684,30.293,43.452,48.653c18.36,18.77,34.68,33.354,48.96,43.76c14.277,10.4,26.215,18.053,35.803,22.949    c9.588,4.896,16.932,7.854,22.031,8.871l7.648,1.531c0.816,0,2.145-0.307,3.979-0.918c1.836-0.613,3.162-1.326,3.979-2.143    l34.883-35.496c7.348-6.527,15.912-9.791,25.705-9.791c6.938,0,12.443,1.223,16.523,3.672h0.611l118.115,69.768    C571.098,441.238,576.197,447.968,577.83,456.128z', fill: '#FFFFFF' })
  );
};

exports.default = ReceiverIcon;

/***/ }),

/***/ 201:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(3);

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Dropdown = function (_React$Component) {
  _inherits(Dropdown, _React$Component);

  function Dropdown(props) {
    _classCallCheck(this, Dropdown);

    var _this = _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call(this, props));

    _this.valueEntered = function (e) {
      var newText = void 0;
      try {
        newText = parseInt(e.target.value);
      } catch (err) {
        return;
      }
      _this.setState({ value: newText });
      _this.props.valueEntered(newText);
    };

    var initialRadius = void 0;
    if (props.options.length > 0) {
      initialRadius = props.options[0];
      props.valueEntered(initialRadius);
    }
    _this.state = {
      value: initialRadius || ''
    };
    return _this;
  }

  _createClass(Dropdown, [{
    key: 'renderOptions',
    value: function renderOptions() {
      return this.props.options.map(function (option) {
        return _react2.default.createElement(
          'option',
          { key: option, value: option },
          option
        );
      });
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'span',
        null,
        _react2.default.createElement(
          'label',
          { className: 'label' },
          this.props.label
        ),
        _react2.default.createElement(
          'select',
          { className: 'react-dropdown', onChange: this.valueEntered },
          this.renderOptions()
        )
      );
    }
  }]);

  return Dropdown;
}(_react2.default.Component);

Dropdown.propTypes = {
  valueEntered: _propTypes2.default.func.isRequired,
  options: _propTypes2.default.array.isRequired,
  label: _propTypes2.default.string.isRequired
};
exports.default = Dropdown;

/***/ }),

/***/ 736:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(17);

var _reactDom2 = _interopRequireDefault(_reactDom);

var _App = __webpack_require__(737);

var _App2 = _interopRequireDefault(_App);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var appContainer = document.getElementById('app');
var authenticated = appContainer.getAttribute('data-authenticated');
authenticated = JSON.parse(authenticated);

_reactDom2.default.render(_react2.default.createElement(_App2.default, {
  resourceUrl: appContainer.getAttribute('data-url'),
  resourceType: appContainer.getAttribute('data-type'),
  description: appContainer.getAttribute('data-desc'),
  authenticated: authenticated }), appContainer);

/***/ }),

/***/ 737:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(3);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _Card = __webpack_require__(738);

var _Card2 = _interopRequireDefault(_Card);

var _InteractiveMap = __webpack_require__(741);

var _InteractiveMap2 = _interopRequireDefault(_InteractiveMap);

var _IntegerTextField = __webpack_require__(876);

var _IntegerTextField2 = _interopRequireDefault(_IntegerTextField);

var _Dropdown = __webpack_require__(201);

var _Dropdown2 = _interopRequireDefault(_Dropdown);

var _helpers = __webpack_require__(97);

var _helpers2 = _interopRequireDefault(_helpers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var App = function (_React$Component) {
  _inherits(App, _React$Component);

  function App(props) {
    _classCallCheck(this, App);

    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));

    _this.markerClicked = function (itemId) {
      _this.state.selectedItem = _this.state.items.find(function (items) {
        return items.id === itemId;
      });
      _this.setState(_this.state);
    };

    _this.mapClicked = function (e) {
      _this.dismissCard(e);
    };

    _this.dismissCard = function (e) {
      _this.state.selectedItem = null;
      _this.setState(_this.state);
    };

    _this.search = function (e) {
      e.preventDefault();
      _helpers2.default.getNearbyZipCodes(_this.state.zipCode, _this.state.distance).then(function (zipCodes) {
        _helpers2.default.getItems(_this.props.resourceUrl, zipCodes).then(function (items) {
          _this.state.items = items;
          _this.setState(_this.state);
        });
      });
    };

    _this.zipCodeEntered = function (zipCode) {
      _this.state.zipCode = zipCode;
      _this.setState(_this.state);
    };

    _this.distanceEntered = function (distance) {
      _this.state.distance = distance;
      _this.setState(_this.state);
    };

    _this.state = {
      selectedItem: null,
      items: [],
      zipCode: null,
      distance: null
    };
    return _this;
  }

  _createClass(App, [{
    key: 'getDistanceOptions',
    value: function getDistanceOptions() {
      return [5, 10, 15, 20, 25, 30, 35, 40, 45, 50];
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        { className: 'trifold-content has-map' },
        _react2.default.createElement(
          'div',
          { className: 'trifold-middle' },
          _react2.default.createElement(_InteractiveMap2.default, {
            items: this.state.items,
            markerClicked: this.markerClicked,
            onClick: this.mapClicked }),
          this.state.selectedItem && _react2.default.createElement(_Card2.default, {
            id: this.state.selectedItem.id ? this.state.selectedItem.id : undefined,
            name: this.state.selectedItem.name,
            city: this.state.selectedItem.city,
            state: this.state.selectedItem.state,
            phone: this.state.selectedItem.phone,
            address: this.state.selectedItem.address,
            email: this.state.selectedItem.email ? this.state.selectedItem.email : undefined,
            imageUrl: this.state.selectedItem.thumbnail ? this.state.selectedItem.thumbnail : undefined,
            galleryUrl: this.state.selectedItem.gallery ? this.state.selectedItem.gallery : undefined,
            dismissCard: this.dismissCard,
            authenticated: this.props.authenticated })
        ),
        _react2.default.createElement(
          'div',
          { className: 'trifold-data' },
          _react2.default.createElement(
            'h4',
            { className: 'title' },
            'Locate a ',
            this.props.resourceType
          ),
          _react2.default.createElement(
            'p',
            { className: 'paragraph' },
            this.props.description
          ),
          _react2.default.createElement(
            'form',
            { onSubmit: this.search },
            _react2.default.createElement(
              'div',
              { className: 'pad-half--ends' },
              _react2.default.createElement(_IntegerTextField2.default, {
                label: 'zipcode',
                valueEntered: this.zipCodeEntered })
            ),
            _react2.default.createElement(
              'div',
              { className: 'pad-half--ends' },
              _react2.default.createElement(_Dropdown2.default, {
                label: 'distance',
                options: this.getDistanceOptions(),
                valueEntered: this.distanceEntered })
            ),
            _react2.default.createElement(
              'div',
              { className: 'push--ends' },
              _react2.default.createElement(
                'button',
                { className: 'btn btn-sm neutral-0', type: 'submit' },
                'Search'
              )
            )
          )
        )
      );
    }
  }]);

  return App;
}(_react2.default.Component);

App.propTypes = {
  resourceUrl: _propTypes2.default.string.isRequired,
  resourceType: _propTypes2.default.string.isRequired,
  description: _propTypes2.default.string.isRequired,
  authenticated: _propTypes2.default.bool
};
exports.default = App;

/***/ }),

/***/ 738:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(3);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _universalCookie = __webpack_require__(48);

var _universalCookie2 = _interopRequireDefault(_universalCookie);

var _EnvelopeIcon = __webpack_require__(176);

var _EnvelopeIcon2 = _interopRequireDefault(_EnvelopeIcon);

var _ReceiverIcon = __webpack_require__(177);

var _ReceiverIcon2 = _interopRequireDefault(_ReceiverIcon);

var _helpers = __webpack_require__(97);

var _helpers2 = _interopRequireDefault(_helpers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Card = function (_React$Component) {
  _inherits(Card, _React$Component);

  function Card(props) {
    _classCallCheck(this, Card);

    var _this = _possibleConstructorReturn(this, (Card.__proto__ || Object.getPrototypeOf(Card)).call(this, props));

    _this.state = {
      modalVisible: false,
      message: '',
      messageVisible: false
    };

    var cookies = new _universalCookie2.default();
    _this.csrfToken = cookies.get('csrftoken');

    _this.dismissCard = _this.dismissCard.bind(_this);
    _this.dismissModal = _this.dismissModal.bind(_this);
    _this.confirmContractor = _this.confirmContractor.bind(_this);
    _this.saveContractor = _this.saveContractor.bind(_this);
    return _this;
  }

  _createClass(Card, [{
    key: 'dismissCard',
    value: function dismissCard(event) {
      this.props.dismissCard(event);
    }
  }, {
    key: 'dismissModal',
    value: function dismissModal(event) {
      this.setState({
        modalVisible: false
      });
    }
  }, {
    key: 'confirmContractor',
    value: function confirmContractor(event) {
      event.preventDefault();
      this.setState({
        modalVisible: true
      });
    }
  }, {
    key: 'saveContractor',
    value: function saveContractor(event) {
      var _this2 = this;

      var contractorId = this.props.id;
      var saveContractor = _helpers2.default.saveContractor(this.csrfToken, contractorId);
      saveContractor.then(function (response) {
        if (response.status === 200) {
          _this2.setState({
            message: _this2.props.name + ' has been saved to your list of contractors',
            messageVisible: true
          });
          setTimeout(function () {
            _this2.setState({
              modalVisible: false,
              messageVisible: false
            });
          }, 2000);
        } else {
          _this2.setState({
            message: 'There was a problem saving ' + _this2.props.name,
            messageVisible: true
          });
          setTimeout(function () {
            _this2.setState({
              messageVisible: false
            });
          }, 2000);
        }
      });
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        { className: 'single-rep-container' },
        _react2.default.createElement(
          'span',
          { className: 'dismiss-card', onClick: this.dismissCard },
          'x'
        ),
        this.props.imageUrl && _react2.default.createElement(
          'div',
          { className: 'single-rep-img' },
          _react2.default.createElement('img', { src: this.props.imageUrl })
        ),
        _react2.default.createElement(
          'div',
          { className: 'single-rep-info' },
          _react2.default.createElement(
            'div',
            null,
            _react2.default.createElement(
              'p',
              { className: 'rep-info' },
              this.props.name
            ),
            this.props.city && this.props.state ? _react2.default.createElement(
              'p',
              { className: 'rep-info rep-info-sm' },
              this.props.city,
              ', ',
              this.props.state
            ) : _react2.default.createElement(
              'p',
              { className: 'rep-info rep-info-sm' },
              this.props.address
            ),
            _react2.default.createElement(
              'p',
              { className: 'rep-info rep-info-sm' },
              this.props.phone
            )
          ),
          _react2.default.createElement(
            'div',
            null,
            this.props.galleryUrl ? _react2.default.createElement(
              'a',
              { className: '', href: this.props.galleryUrl },
              'View Project Gallery'
            ) : undefined,
            this.props.authenticated ? _react2.default.createElement(
              'a',
              { className: 'link neutral-0 rep-info-sm', href: '#', onClick: this.confirmContractor },
              'Save Contact Info'
            ) : undefined
          ),
          _react2.default.createElement(
            'div',
            { className: 'rep-icon-container' },
            this.props.email && _react2.default.createElement(
              'a',
              { href: 'mailto:' + this.props.email, className: 'rep-icon' },
              _react2.default.createElement(_EnvelopeIcon2.default, null)
            ),
            _react2.default.createElement(
              'a',
              { href: 'tel:' + this.props.phone, className: 'rep-icon' },
              _react2.default.createElement(_ReceiverIcon2.default, null)
            )
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'modal-wrap ' + (this.state.modalVisible ? 'is-visible' : '') },
          _react2.default.createElement(
            'div',
            { className: 'modal is-map' },
            _react2.default.createElement(
              'div',
              { className: 'modal-view' },
              _react2.default.createElement(
                'span',
                { className: 'dismiss-modal', onClick: this.dismissModal },
                'x'
              ),
              _react2.default.createElement(
                'div',
                { className: 'modal-header' },
                this.state.messageVisible ? _react2.default.createElement(
                  'h4',
                  { className: 'title' },
                  'Success'
                ) : _react2.default.createElement(
                  'h4',
                  { className: 'title' },
                  'Save Contractor'
                )
              ),
              _react2.default.createElement(
                'div',
                { className: 'modal-content' },
                this.state.messageVisible ? _react2.default.createElement(
                  'p',
                  { className: 'paragraph' },
                  this.state.message
                ) : _react2.default.createElement(
                  'p',
                  { className: 'paragraph' },
                  'Would you like to save ',
                  this.props.name,
                  ' to your list of contractors?'
                ),
                this.state.messageVisible ? _react2.default.createElement(
                  'button',
                  { className: 'btn btn-md neutral-0' },
                  'SAVED'
                ) : _react2.default.createElement(
                  'button',
                  { className: 'btn btn-md neutral-0', onClick: this.saveContractor },
                  'SAVE'
                )
              ),
              _react2.default.createElement('div', { className: 'modal-footer' })
            )
          )
        )
      );
    }
  }]);

  return Card;
}(_react2.default.Component);

;

Card.propTypes = {
  id: _propTypes2.default.number,
  name: _propTypes2.default.string.isRequired,
  city: _propTypes2.default.string,
  state: _propTypes2.default.string,
  address: _propTypes2.default.string,
  phone: _propTypes2.default.string.isRequired,
  email: _propTypes2.default.string,
  imageUrl: _propTypes2.default.string,
  galleryUrl: _propTypes2.default.string,
  dismissCard: _propTypes2.default.func.isRequired,
  authenticated: _propTypes2.default.bool
};

exports.default = Card;

/***/ }),

/***/ 741:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(3);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _reactLeaflet = __webpack_require__(270);

var _leaflet = __webpack_require__(9);

var _leaflet2 = _interopRequireDefault(_leaflet);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InteractiveMap = function (_React$Component) {
  _inherits(InteractiveMap, _React$Component);

  function InteractiveMap(props) {
    _classCallCheck(this, InteractiveMap);

    var _this = _possibleConstructorReturn(this, (InteractiveMap.__proto__ || Object.getPrototypeOf(InteractiveMap)).call(this, props));

    _this.markerIcon = new _leaflet2.default.Icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
      shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    });
    return _this;
  }

  _createClass(InteractiveMap, [{
    key: 'markerClicked',
    value: function markerClicked(dealerId) {
      this.props.markerClicked(dealerId);
    }
  }, {
    key: 'mapClicked',
    value: function mapClicked(e) {
      this.props.onClick(e);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var listLength = this.props.items.length;

      var zoom = void 0;
      if (listLength === 0) {
        zoom = 4;
      } else if (listLength === 1) {
        zoom = 13;
      } else {
        zoom = undefined;
      }

      var position = void 0;
      if (listLength === 0) {
        position = [37.09024, -95.712891];
      } else if (listLength === 1) {
        position = [this.props.items[0].lat, this.props.items[0].lng];
      } else {
        position = undefined;
      }

      var bounds = [];
      if (listLength > 1) {
        var coords = this.props.items.map(function (dealer) {
          return [dealer.lat, dealer.lng];
        });
        coords.forEach(function (coord) {
          // Include the coord in the final bounds
          // if it is only found once in the array
          var coordCount = bounds.reduce(function (count, c) {
            return count + (c[0] === coord[0] && c[1] === coord[1]);
          }, 0);
          if (coordCount === 0) {
            bounds.push(coord);
          }
        });

        // After filtering if there is only one bound we have to
        // use position and zoom instead
        if (bounds.length === 1) {
          position = bounds[0];
          zoom = 13;
          bounds = undefined;
        }
      } else {
        bounds = undefined;
      }

      return _react2.default.createElement(
        'div',
        { className: 'nico-map' },
        _react2.default.createElement(
          _reactLeaflet.Map,
          {
            center: position,
            zoom: zoom,
            bounds: bounds,
            onClick: function onClick() {
              return _this2.mapClicked();
            },
            animate: true },
          _react2.default.createElement(_reactLeaflet.TileLayer, {
            url: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',
            attribution: '\xA9 <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> \xA9 <a href="http://cartodb.com/attributions">CartoDB</a>' }),
          this.props.items.map(function (item) {
            return _react2.default.createElement(_reactLeaflet.Marker, {
              icon: _this2.markerIcon,
              position: [item.lat, item.lng],
              key: '' + item.id + item.lat + item.lng,
              onClick: function onClick() {
                return _this2.markerClicked(item.id);
              } });
          })
        )
      );
    }
  }]);

  return InteractiveMap;
}(_react2.default.Component);

;

InteractiveMap.propTypes = {
  items: _propTypes2.default.array,
  onClick: _propTypes2.default.func,
  markerClicked: _propTypes2.default.func
};

exports.default = InteractiveMap;

/***/ }),

/***/ 876:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(2);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(3);

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TextField = function (_React$Component) {
  _inherits(TextField, _React$Component);

  function TextField(props) {
    _classCallCheck(this, TextField);

    var _this = _possibleConstructorReturn(this, (TextField.__proto__ || Object.getPrototypeOf(TextField)).call(this, props));

    _this.state = {
      number: ''
    };
    return _this;
  }

  _createClass(TextField, [{
    key: 'valueEntered',
    value: function valueEntered(e) {
      var newNumber = e.target.value;
      this.setState({ number: newNumber });
      this.props.valueEntered(newNumber);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      return _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'label',
          { className: 'label' },
          this.props.label
        ),
        _react2.default.createElement('input', {
          type: 'text',
          className: 'input',
          onChange: function onChange(e) {
            return _this2.valueEntered(e);
          },
          value: this.state.number })
      );
    }
  }]);

  return TextField;
}(_react2.default.Component);

;

TextField.propTypes = {
  valueEntered: _propTypes2.default.func.isRequired,
  label: _propTypes2.default.string.isRequired
};

exports.default = TextField;

/***/ }),

/***/ 97:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _axios = __webpack_require__(26);

var _axios2 = _interopRequireDefault(_axios);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var helpers = {
  getNearbyZipCodes: function getNearbyZipCodes(zipCode, radius) {
    return _axios2.default.get('/rest/postal-codes/?radius=' + radius + '&postal_code=' + zipCode).then(function (data) {
      return data.data;
    }).catch(function (error) {
      return error.response.data;
    });
  },
  getItems: function getItems(resourceUrl, zipCodes) {
    var data = {
      postal_codes: zipCodes
    };
    return _axios2.default.post(resourceUrl, data).then(function (data) {
      return data.data;
    }).catch(function (error) {
      return error;
    });
  },
  saveContractor: function saveContractor(csrfToken, id) {
    var config = {
      headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': csrfToken
      }
    };
    return _axios2.default.post('/rest/contractor-list/edit/' + id, {}, config).then(function (data) {
      return data;
    }).catch(function (error) {
      return error;
    });
  }
};

exports.default = helpers;

/***/ })

},[736]);